---
main:
  run: |
    if (level.hasStoredContent) $.goTo("exercise");
    else {
      set((m) => {
        m.chat.stopBlock = locales.get("not_now");
        m.$canRun = false;
        m.$canEdit = false;
      });
    }
  messages:
  - entonces, con el combo `LDA` + `STA` puedes escribir en memoria ‚úçÔ∏è
  - "hay instrucciones similares que usan los registros [X] e [Y]:"
  - "`LDX`, `STX`, `LDY` y `STY`"
  - ahora vamos a usar las variantes [X], solo por diversi√≥n
  responses:
  - ¬øqu√© pasa si quiero <leer> de la memoria? üìñ [read]

read:
  messages:
  - "puedes pasarle una direcci√≥n de memoria a `LDX`, tan solo omitiendo el prefijo #"
  - p. ej. la instrucci√≥n `LDX $4080` cargar√° en [X] lo que sea que est√© en la direcci√≥n de memoria $4080
  responses:
  - ¬øy despu√©s qu√©? ü§î [then]

then:
  messages:
  - una vez que cargas algo en un registro, puedes hacer lo que t√∫ quieras
  - algo com√∫n es mutar el valor y copiarlo a otro registro
  - ¬°o a otra ubicaci√≥n de memoria! üêè
  - "`INX`, por ejemplo, incrementa el valor en [X]"
  responses:
  - ¬øpuedo probarlo? [tryit]

tryit:
  run-after-messages: |
    set((m) => m.$canRun = true);
  messages:
  - s√≠, hay un $10 ya cargado en $4085
  - ejecuta el c√≥digo actual y mira qu√© ocurre ‚è©
  events:
  - end [result]

result:
  messages:
  - ¬øves? el programa ley√≥ ese $10
  - lo increment√≥ 3 veces
  - y escribi√≥ el resultado en $4086 üòé
  responses:
  - suena como mucho trabajo, ¬øqu√© pasa si quiero incrementarlo 8 veces? [8times]

8times:
  messages:
  - "en ese caso, escribes:"
  - INX
  - INX
  - INX
  - INX
  - INX
  - INX
  - INX
  - INX
  - nah, mentira üòÇ
  - hay una instrucci√≥n para sumar
  - "puedes escribir `ADC #$08` para incrementar [A] ocho veces"
  responses:
  - uff üòÖ [iknow]
  - pero... [iknow]

iknow:
  run-after-messages: |
    $.goTo("exercise");
  messages:
  - ya s√©, dije [A] en vez de [X]
  - "`ADC` solo funciona con [A] ü§∑"
  - mmm...
  responses: []

exercise:
  run: |
    level.fillContentFromTemp();
    set((m) => {
      m.chat.stopBlock = null;
      m.$canRun = true;
      m.$canEdit = true;
      m.content.useTempContent = false;
    });
  messages:
  - vamos a refactorizar el c√≥digo üí°
  - haz que use `ADC` en vez de 3 instrucciones de incremento
  - (recuerda reemplazar `LDX` y `STX` por `LDA` y `STA`)
  - cuando est√© listo, ejecuta el comando `test`
  responses: []
